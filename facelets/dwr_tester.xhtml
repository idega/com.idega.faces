<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html   
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <head>
    	<!-- jQuery -->
	    <script
    	    type="text/javascript"
        	src="//code.jquery.com/jquery-latest.js"/>

		<!-- DWR -->
    	<script
	        type="text/javascript"
	        src="/dwr/engine.js" />
	    <script
	        type="text/javascript"
	        src="/dwr/util.js" />
        <script type="text/javascript">
			function setAction() {
				jQuery('#tester').hide();
				
				var action = jQuery('#action').val();
				if (action != null) { 
					var array = action.split('.');
					if (array.length == 2) {
						LazyLoader.loadMultiple(['/dwr/interface/' + array[0] + '.js'], function() {
							jQuery('#tester').show();
						});

						jQuery('#tester').attr("onclick", action);
					} else {
						alert('Action must be defined as "Class.action(argument)" now: ' + action);
					}
				} else {
					alert('Action is not provided: "' + action + '"');
				}
			}			
		</script>
    </head>
    <body>
        <input 
        	id="action"
        	onchange="setAction()"/>
        <input 
            id="tester"
            type="button" 
            value="Test!"/>
    </body>
</html>